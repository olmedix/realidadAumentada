<script>
  AFRAME.registerComponent('mobile-movement', {
    init: function() {
      this.velocity = new THREE.Vector3();
      this.acceleration = new THREE.Vector3();
      
      // Escuchar eventos de movimiento del dispositivo
      window.addEventListener('devicemotion', (e) => {
        if (e.acceleration) {
          // Filtrar ruido (solo movimientos significativos)
          const threshold = 0.5;
          
          const ax = Math.abs(e.acceleration.x) > threshold ? e.acceleration.x : 0;
          const ay = Math.abs(e.acceleration.y) > threshold ? e.acceleration.y : 0;
          const az = Math.abs(e.acceleration.z) > threshold ? e.acceleration.z : 0;
          
          this.acceleration.set(ax, ay, az);
        }
      });
    },
    
    tick: function(time, delta) {
      const deltaSeconds = delta / 1000;
      const dampening = 0.9; // Fricci贸n
      
      // Integrar aceleraci贸n -> velocidad
      this.velocity.x += this.acceleration.x * deltaSeconds;
      this.velocity.y += this.acceleration.y * deltaSeconds;
      this.velocity.z += this.acceleration.z * deltaSeconds;
      
      // Aplicar fricci贸n
      this.velocity.multiplyScalar(dampening);
      
      // Aplicar velocidad -> posici贸n
      const pos = this.el.getAttribute('position');
      pos.x += this.velocity.x * deltaSeconds * 0.1;
      pos.y += this.velocity.y * deltaSeconds * 0.1;
      pos.z += this.velocity.z * deltaSeconds * 0.1;
      
      this.el.setAttribute('position', pos);
    }
  });
</script>

<a-entity id="rig" mobile-movement position="0 1.6 0">
  <a-entity camera look-controls>...</a-entity>
</a-entity>